<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<title></title>
		
		<link rel="stylesheet" href="css/page1.css" />
		<link rel="stylesheet" href="css/page2.css" />
		<link rel="stylesheet" href="css/page3.css" />
	
	</head>
	
	<style type="text/css">
		html,body,div{
			border: 0;
			padding: 0;
			margin: 0;
		}
	</style>
	
	<script type="text/javascript">
		function resize(){
				var docEl = document.documentElement;
				var clientWidth = window.innerWidth;
				if(clientWidth <= 320){
					docEl.style.fontSize = '50px';
				}else if(clientWidth >= 640){
					docEl.style.fontSize = '100px';
				}else{
					docEl.style.fontSize = 100 * (clientWidth / 640) + 'px';
				}
			}
		resize();
	</script>
	
	<body>
		
		<!-- 第一个页面 -->
		<div id="first">
			<!-- 背景图片 -->
			<img class="img1" src="img/底图.png" />
			<!-- 返回按钮 -->
			<img class="s_img2" src="img/返回.png" />
			<!-- 顶部文字 -->
			<div class="top_font">
				Gender Swap
			</div>
			<!-- 中部视频 -->
			<div id="div1">
				<video id="f_video" width="100%" muted="muted" loop="loop" x5-playsinline="" playsinline="" webkit-playsinline="" poster="" x-webkit-airplay="allow" preload="auto">
				  <source src="video/白人男女-810-1140.mp4" type="video/mp4">
				</video>
			</div>
			<!-- 底部按钮 -->
			<span class="btn1" id="f_btn1">
				Take Photos
			</span>
			<div class="btn" id="f_btn" onclick="divSW1()"></div>
			
		</div>
		
		<!-- 第二个页面 -->
		<div id="second" id="video-warp">
			<!-- 背景图片 -->
			<img class="s_img1" src="img/底图.png" />
			<!-- 返回按钮 -->
			<img class="s_img2" onclick="divSW2()" src="img/返回.png" />
			<!-- 视频 -->
			<div class="video_1">
				<video id="video" width="100%" x5-playsinline="" playsinline="" webkit-playsinline="" poster="" x-webkit-airplay="allow" preload="auto">
					<source src="video/黑人男女-810-1140.mp4" type="video/mp4"></source>
				</video>
			</div>
			<!-- 手指 -->
			<div class="shou" id="shou">
				<img src="img/手指.png" />
			</div>
			<!-- 滑块 -->
			<div class="progress">
				<div class="timrBar"></div>
			</div>
		</div>

		<!-- 第三个页面 -->
		<div id="third">
			<img class="t_img1" src="img/底图.png" />
			<img class="t_img2" onclick="divSW3()" src="img/返回.png" />
			
			<div class="t_video">
				<video id="t_video" width="100%" muted="muted" loop="loop" x5-playsinline="" playsinline="" webkit-playsinline="" poster="" x-webkit-airplay="allow" preload="auto">
				  <source src="video/黑人男女-对比循环.mp4" type="video/mp4">
				</video>
			</div>
	
			<div class="t_btn">
				<div class="t_font">
					Download Now
				</div>
			</div>
		</div>
	
	</body>
	
	<script type="text/javascript">
	
		window.onload=function(){
			//自适应字体大小
			/* document.documentElement.style.fontSize = document.documentElement.clientWidth / 6.4 + 'px'; */
			/* document.body.style.fontSize = '16px'; */
			//页面加载后一秒自动播放视频
			setTimeout(function(){
				var video_1=document.getElementById("f_video");
				video_1.play();
				
				/* document.getElementById("f_btn").style.animationName="page1_kf1";
				document.getElementById("f_btn1").style.animationName="page1_kf2"; */
			},1000);
		}
		
		// 第一个页面跳转到第二个页面
		function divSW1() {
			var dv1 = document.getElementById( "first" );
			var dv2 = document.getElementById( "second" );
			var hide = true;
		    if( hide ) {
		       dv1.style.display = "none"; 
			   dv2.style.display = "block";
		       hide = false;
		    } else {
		        dv1.style.display = "block";
				dv2.style.display = "none"; 
		        hide = true;
		    }
			//播放闪屏动画
			dv2.style.animationName="name1";
			
			setTimeout(function(){
				var currentTime = v.video.currentTime;
				var duration = v.video.duration;
				var percent = currentTime / duration * 100;
				v.video.play();
				if(percent=0.5){
					v.video.pause();
				}
			},500);
			
			
			//过5秒钟之后视频自动播放
			setTimeout(function(){
				//手指消失
				var shou=document.getElementById("shou");
				shou.style.display = "none";
				//播放视频
				v.video.play();
				//视频播放完之后跳转到下一个页面
				v.video.addEventListener("ended",function(){
					var dv2 = document.getElementById( "second" );
					var dv3 = document.getElementById( "third" );
					var hide = true;
					if( hide ) {
					   dv2.style.display = "none"; 
					   dv3.style.display = "block";
					   hide = false;
					} else {
					    dv2.style.display = "block";
						dv3.style.display = "none"; 
					    hide = true;
					}
					//播放第三个视频
					var video_3=document.getElementById("t_video");
					video_3.play();
				});
			},6000);
		}
		//第二个页面返回第一个页面
		function divSW2() {
			var dv1 = document.getElementById( "first" );
			var dv2 = document.getElementById( "second" );
			var hide = true;
		    if( hide ) {
		       dv1.style.display = "block"; 
			   dv2.style.display = "none";
		       hide = false;
		    } else {
		        dv1.style.display = "none";
				dv2.style.display = "block"; 
		        hide = true;
		    }
		}
		//第三个页面返回第二个页面
		function divSW3() {
			var dv2 = document.getElementById( "second" );
			var dv3 = document.getElementById( "third" );
			var hide = true;
		    if( hide ) {
		       dv2.style.display = "block"; 
			   dv3.style.display = "none";
		       hide = false;
		    } else {
		        dv2.style.display = "none";
				dv3.style.display = "block"; 
		        hide = true;
		    }
		}
			
		/* 进度条控制视频播放 自定义进度条 进度条可拖拽 */
		
		var v={
			video: document.getElementById("video"), //容器框
			progress: document.getElementsByClassName("progress")[0], //进度条容器
			timrBar: document.getElementsByClassName("timrBar")[0], //进度条
			warp: document.getElementById("video-warp") //视频区域距左边的距离
		};
		
		v.video.onloadedmetadata = function(){
			//进度条跟随
			v.video.ontimeupdate = function() {
				//获取视频当前播放时间
			    var currentTime = v.video.currentTime;
				//获取视频总时间
			    var duration = v.video.duration;
				//视频当前播放时间的百分比
			    var percent = currentTime / duration * 100;
			    /* v.timrBar.style.width = percent + "%" ; */
				//通过百分比调整进度条位置
				v.timrBar.style.transform = "translateX("+ percent*3.55 + "%"+")";
			}
			//进度条获取坐标 调用触摸事件 实现拖拽
			var enableProgressDrag = function(e) {
				//进度条可拖放状态
			    var progressDrag = false;
				//手指触摸  按下手指时
			    v.progress.ontouchstart = function(e) {
			        progressDrag = true;
			        updateprogress(e.touches[0].pageX);
			    }
				//手指触摸  松开手指时
			    document.ontouchend = function(e) {
			        /* if(progressDrag) {
			            progressDrag = false;
			            updateprogress(e.touches[0].pageX - v.warp.offsetLeft);
			        } */
					if(progressDrag){
						progressDrag=false;
						if(v.timrBar.style.transform=="translateX(355%)"){
							var dv2 = document.getElementById( "second" );
							var dv3 = document.getElementById( "third" );
							var hide = true;
							if( hide ) {
							   dv2.style.display = "none"; 
							   dv3.style.display = "block";
							   hide = false;
							} else {
							    dv2.style.display = "block";
								dv3.style.display = "none"; 
							    hide = true;
							}
							//播放第三个视频
							var video_3=document.getElementById("t_video");
							video_3.play();
						}else{
							v.timrBar.style.transform="translateX(0%)";
							v.video.currentTime=0;
						}
					}
			    }
				//手指触摸  移动手指时
			    v.progress.ontouchmove = function(e) {
			        if(progressDrag) {
			            updateprogress(e.touches[0].pageX);
			        }
			    }
			};
		
			enableProgressDrag();
			
			//进度条可拖拽
			function updateprogress(x) {
			    var percent = 100 * (x - v.progress.offsetLeft) / v.progress.offsetWidth;
			    if(percent > 100) {
			        percent = 100;
			    }
			    if(percent < 0) {
			        percent = 0;
			    }
			    /* v.timrBar.style.width = percent + "%" ; */
				v.timrBar.style.transform = "translateX("+ percent*3.55 + "%"+")";
			    v.video.currentTime = v.video.duration * percent / 100;
			}
		}
	</script>
	
</html>
